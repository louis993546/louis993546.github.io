{"componentChunkName":"component---src-templates-blog-post-js","path":"/compose95/","result":{"data":{"site":{"siteMetadata":{"title":"Louis Tsai blog"}},"markdownRemark":{"id":"283dea52-f871-58f7-b7f0-688ff778d1ef","excerpt":"Random Compose Project #1: Compose95 Jetpack Compose is getting closer and closer to becoming ‚Äústable enough‚Äù, and for the next few weeks/months, I will be‚Ä¶","html":"<h3>Random Compose Project #1: Compose95</h3>\n<p>Jetpack Compose is getting closer and closer to becoming ‚Äústable enough‚Äù, and for the next few weeks/months, I will be working on a bunch of completely random projects, and document what I have learned along the way.</p>\n<p><strong>TL;DR: This is not tutorial/how-to of Jetpack Compose at all. This is just blog post of my experience of using it.</strong></p>\n<h3>What is Compose95</h3>\n<p>As it‚Äôs name suggest, it‚Äôs trying to build Jetpack Compose that looks like it‚Äôs 1995, more specifically, Windows 95. It is inspired by Miguel Beltran‚Äôs work on <a href=\"https://github.com/miquelbeltran/flutter95\">Flutter95</a>, which is inspired by Artur Bie≈Ñ‚Äôs <a href=\"https://github.com/arturbien/React95\">React95</a></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1200/1*jt7pi5ngR2aNOLD5QsM81g.png\" alt=\"Screenshot of Flutter95 on GitHub\">miquelbeltran/flutter95</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1200/1*nkfvrtln7TS2C4KWywN7fw.png\" alt=\"Screenshot of home page of React95 on GitHub\">arturbien/React95</p>\n<h3>What am I building, exactly?</h3>\n<p>For this post, I am documenting what I went through when buildling</p>\n<ul>\n<li>Window (most of it)</li>\n<li>Button</li>\n</ul>\n<p>It‚Äôs all open-source, click <a href=\"https://github.com/louis993546/Compose95\">here</a> to judge how bad the code is üòÇ</p>\n<h3>Window</h3>\n<p>Window is the relatively straight forward component to build. It is basically just a container with a bar at the top, optionally the ability to minify/maximize/close the window, which doesn‚Äôt make sense in the case of an Android app anyway.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2400/1*55NcXvojhGPXkBYD10d2_A.png\" alt=\"Screenshot of Android Studio, which has code of Window95, Preview of Window95, and an emulator showing what it looks like\"></p>\n<p>As you can see, <code class=\"language-text\">Windows95</code> is pretty straight forward. The most ‚Äúcomplicated‚Äù part is probably the border. If you remember, Windows 95 is very skeuomorphism (is this word an adjective?), and the borders colors really sells the elevation, even to this date. I am not saying it looks great, but it certainly is effective. Using React95 as reference, I can see that the border is actually more like 2 boarders:</p>\n<ul>\n<li>1 on the outsize with pure white or black</li>\n<li>1 on the inside a few shares of grey to make it look more like shadow, instead of just color borders</li>\n</ul>\n<p>And to achieve that look, basically I have to figure out how to draw border that has different color accordingly, and that means digging into what <code class=\"language-text\">.drawBorder</code> is doing. Since it is a receiver function of <code class=\"language-text\">Modifier</code>, of course there is a <code class=\"language-text\">Modifier.Element</code> powering it, in this case: <code class=\"language-text\">DrawModifier</code>. And once you get the draw scope inside of it, you just have to figure out the coordinates, and then it is not too complicated to draw the 8 lines.</p>\n<p>And 1 last thing: if you check <code class=\"language-text\">DrawBorder</code>, you can see there are a lot more complexity inside, with how round corner should be, and most importantly cache. At some point <code class=\"language-text\">Window95</code> probably should do that, but it is way too early for me to do any kind of optimization. Hell the code still looks like shit.</p>\n<h3>Button</h3>\n<p><code class=\"language-text\">Button95</code> is also structurally quite simple, the ‚Äúbiggest‚Äù challenge is to figure out how to detect press state, and flip the borders around to sell the effect of ‚Äúfrom above surface to below surface‚Äù. And to figure out how, I digged into <code class=\"language-text\">.ripple</code>.</p>\n<p>Inside <code class=\"language-text\">.ripple</code>, I found <code class=\"language-text\">RippleModifier</code>, but there is nothing too interesting to look into, since it looks like most of the code is about the animation of the ripple. What I want in this case is just a very basic ‚Äúis it pressed or not‚Äù callback of some sort. And after I while, I realized that there are more than 1 argument for <code class=\"language-text\">.clickable</code>, esp. <code class=\"language-text\">Indication</code>. It is exactly what I need in this case.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2400/1*8syesNMCHQ-yswfx6-rqwQ.png\" alt=\"Screenshot of Android Studio, which has code of Button95, Preview of Button95, and an emulator showing what it looks like\"></p>\n<p>What <code class=\"language-text\">Indication</code> does is actually more like <code class=\"language-text\">IndicationFactory</code>, which creates <code class=\"language-text\">IndicationInstance</code>, and that <code class=\"language-text\">IndicationInstance</code> just have a function that gets a <code class=\"language-text\">ContentDrawScope</code> to draw whatever I want. And now things are starting to look very similar to how I draw the boarders in<code class=\"language-text\">Window95</code>, except I have to check <code class=\"language-text\">interactionState</code> to see what color each border should be.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*5y3sebbyauJ_H3A6XFs2WA.gif\" alt=\"A GIF of Button95 being click, and what happens when it got long press (content got highlited)\"></p>\n<p>While technically not a bug, it looks like I still have some work to do to figure out how to make it behave more naturally‚Ä¶‚Ä¶</p>\n<p>This is the end of this blog post, it is absolutely gonna take me forever to get it to a working state. I wish I have more energy and time to work on stuff like this‚Ä¶‚Ä¶</p>","frontmatter":{"title":"Random Compose Project #1: Compose95","date":"July 25, 2020","description":"How to build extremely specific and out-dated design with Jetpack Compose (thread 1/100000)"}}},"pageContext":{"slug":"/compose95/","previous":{"fields":{"slug":"/photo-2020/"},"frontmatter":{"title":"Am I still taking photos in 2020? Kinda"}},"next":{"fields":{"slug":"/flipper/"},"frontmatter":{"title":"Let‚Äôs see if Flipper can make me a 1.1x engineer"}}}},"staticQueryHashes":["2841359383","4138022990"]}